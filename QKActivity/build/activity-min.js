(function(E){var D=E.window,e=E.document,J=E.console,q=!!e.addEventListener,x=encodeURIComponent(E.location.href),v=0,i=0,a=1,h=0,G=[1000*60*5,1000*60*60],c=60000,A=3000,n=true,r=true,t="http://stat.app.7k7k.com/index.php?f=ipt.get.json&from={p}&aid={a}&uid={u}&key={k}&stay={s}&time={r}",z="guid",y,w,F=[],I="mousemove",B="mousedown",o="keydown",f="beforeunload",g=q?function(N,M,L){N.addEventListener(M,L,false)}:function(N,M,L){N.attachEvent("on"+M,L)},b=q?function(N,M,L){N.removeEventListener(M,L,false)}:function(N,M,L){N.detachEvent("on"+M,L)},m=function(P,M,N){var L,Q,O=(M||"").replace(/^\s+|\s+$/g,"").replace(/\s+/g," ").split(" ");for(L=0,Q=O.length;L<Q;L++){g(P,O[L],N)}};function s(M){var L=this;if(!(L instanceof s)){return new s(M)}F[L.GID=s.guid()]=L;w=k(true);if(M){v=M.stopAt||v;i=M.warnAt||i;a=M.callAt||a;h=M.notifyBy||h;G=M.warnBy||G;c=M.interval||c;A=M.statusBy===0?0:M.statusBy||A;n=typeof M.whenEnter==="boolean"?M.whenEnter:n;r=typeof M.whenLeave==="boolean"?M.whenLeave:r;t=M.uri||t;y=M.callback||y;L._notify=M.notify}L.gid=s.guid();L.key=s.guid(true);L._init();return L}s.prototype={_init:function(){var L=this,M=u();L.initTime=M;L.lastTime=M;L.sendCount=0;L.warnCount=0;if(n){(new Image()).src=K(t,{p:x,u:H(),a:L.gid,k:L.key,s:C(L,-1),r:M})}if(r){g(D,f,function(){b(D,f,arguments.callee);(new Image()).src=K(t,{p:x,u:H(),a:L.gid,k:L.key,s:C(L),r:u()});setTimeout(function(){},1000)})}if(a>0){L.called=0;E[L.callback=y||("__accb"+s.v4())]=function(O){var N;if((N=++L.called)%a===0){l(L,"call",{guid:L.key,count:N,data:O})}}}L._init=null},destory:function(){var L=this.GID;if(L){F[L]=null;delete F[L]}},start:function(){var L=this;if(!L._fn){L._fn=function(N){N=N||event;var M=N.pageX||N.clientX,O=N.pageY||N.clientY;if(L.x!==M&&L.y!==O){L.x=M;L.y=O;p(L)}};g(e,I,L._fn)}if(!L._do){L._do=function(){p(L)};m(e,o+" "+B,L._do)}return L},stop:function(){var L=this;L.lastTime=u();L.sendCount=0;L.warnCount=0;b(e,I,L._fn);b(e,o,L._do);b(e,B,L._do);L._fn=L._do=null;return L},statusChange:function(M){var L=this,N;N=L.key=s.guid(true);l(L,"status",{guid:N,count:L.sendCount,newVal:M});L.stop().start()}};s.v4=function(){return(((1+Math.random())*65536)|0).toString(16).substring(1)};s.guid=function(N){var M=N?d(z):"";if(N&&typeof M==="string"&&M.length>0){return M}M="";for(var L=0;L<8;L++){M+=s.v4()}M+=u();if(N){j(z,M,1,"7k7k.com","/")}return M};function C(L,M){return arguments.length>1?M:Math.max(0,u()-L.initTime)}function k(N){var L=H()>0;if(!N&&w!==L){w=L;for(var M in F){if(F[M]){try{F[M].statusChange(L)}catch(O){if(J&&J.log){J.log("[statusChange error]: "+O.message)}}}}}if(A>0){setTimeout(k,A)}return L}function p(U){var M=U.options,V=u(),L=V-U.lastTime,R,N,T,O,Q,S,P=1;if(L<=0||(w&&L>=c&&(P=2))||((!G||!G.length)&&L>=c&&(P=3))||(!w&&L>=(G[U.warnCount]||G[G.length-1])&&(P=4))){if(P===4&&i&&i<=U.warnCount){return}U.lastTime=V;Q=H();N=K(t,{p:x,u:Q,a:U.gid,k:U.key,s:C(U),r:V});if(a>0&&U.callback){O=document.createElement("script");T=e.head||e.getElementsByTagName("head")[0]||e.documentElement;O.async="async";O.src=N+"&callback="+U.callback;T.insertBefore(O,T.firstChild)}else{O=new Image(1,1);O.src=N}R=++U.sendCount;S={guid:U.key,count:R};if(h>0&&(R%h)===0){l(U,"send",S)}if((!w&&G&&G.length)||(i>0&&R>=i&&Q<=0&&!U.warnCount)){++U.warnCount;S.warn=U.warnCount;l(U,"warn",S)}if(v>0&&R>=v&&Q<=0){U.stop();l(U,"stop",S)}}}function l(N,M,O){if(N&&typeof N._notify==="function"){try{N._notify.call(N._notify,M,O)}catch(L){if(J&&J.log){J.log("[notify error]: "+L.message)}}}}function K(N,M,L){return N.replace(L||/\\?\{([^{}]+)\}/g,function(P,O){if(P.charAt(0)==="\\"){return P.slice(1)}return(M[O]!==undefined)?M[O]:""})}function u(){return(new Date()).getTime()}function H(L){return parseInt(d(L||"userid"))||0}function d(N){var M,L;if(typeof N==="string"){if((L=String(e.cookie).match(new RegExp("(?:^| )"+N+"(?:(?:=([^;]*))|;|$)")))){M=L[1]?decodeURIComponent(L[1]):""}}return M}function j(N,S,L,O,Q,P){var R=String(encodeURIComponent(S)),M=L;if(typeof M==="number"){M=new Date();M.setTime(M.getTime()+L*86400000)}if(M instanceof Date){R+="; expires="+M.toUTCString()}if(typeof O==="string"&&O!=""){R+="; domain="+O}if(typeof Q==="string"&&Q!=""){R+="; path="+Q}if(P){R+="; secure"}e.cookie=N+"="+R}E.ActivityMonitor=s})(window);